<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Typedecl_properties (ocaml.Typedecl_properties)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">ocaml</a> &#x00BB; Typedecl_properties</nav><h1>Module <code>Typedecl_properties</code></h1></header><dl><dt class="spec type" id="type-decl"><a href="#type-decl" class="anchor"></a><code><span class="keyword">type</span> decl</code><code> = <a href="../Types/index.html#type-type_declaration">Types.type_declaration</a></code></dt></dl><aside><p>An abstract interface for properties of type definitions, such as variance and immediacy, that are computed by a fixpoint on mutually-recursive type declarations. This interface contains all the operations needed to initialize and run the fixpoint computation, and then (optionally) check that the result is consistent with the declaration or user expectations.</p></aside><dl><dt class="spec type" id="type-property"><a href="#type-property" class="anchor"></a><code><span class="keyword">type</span> <span>('prop, 'req) property</span></code><code> = </code><code>{</code><table class="record"><tr id="type-property.eq" class="anchored"><td class="def field"><a href="#type-property.eq" class="anchor"></a><code>eq : <span class="type-var">'prop</span> <span>&#45;&gt;</span> <span class="type-var">'prop</span> <span>&#45;&gt;</span> bool;</code></td></tr><tr id="type-property.merge" class="anchored"><td class="def field"><a href="#type-property.merge" class="anchor"></a><code>merge : <span>prop:<span class="type-var">'prop</span></span> <span>&#45;&gt;</span> <span>new_prop:<span class="type-var">'prop</span></span> <span>&#45;&gt;</span> <span class="type-var">'prop</span>;</code></td></tr><tr id="type-property.default" class="anchored"><td class="def field"><a href="#type-property.default" class="anchor"></a><code>default : <a href="index.html#type-decl">decl</a> <span>&#45;&gt;</span> <span class="type-var">'prop</span>;</code></td></tr><tr id="type-property.compute" class="anchored"><td class="def field"><a href="#type-property.compute" class="anchor"></a><code>compute : <a href="../Env/index.html#type-t">Env.t</a> <span>&#45;&gt;</span> <a href="index.html#type-decl">decl</a> <span>&#45;&gt;</span> <span class="type-var">'req</span> <span>&#45;&gt;</span> <span class="type-var">'prop</span>;</code></td></tr><tr id="type-property.update_decl" class="anchored"><td class="def field"><a href="#type-property.update_decl" class="anchor"></a><code>update_decl : <a href="index.html#type-decl">decl</a> <span>&#45;&gt;</span> <span class="type-var">'prop</span> <span>&#45;&gt;</span> <a href="index.html#type-decl">decl</a>;</code></td></tr><tr id="type-property.check" class="anchored"><td class="def field"><a href="#type-property.check" class="anchor"></a><code>check : <a href="../Env/index.html#type-t">Env.t</a> <span>&#45;&gt;</span> <a href="../Ident/index.html#type-t">Ident.t</a> <span>&#45;&gt;</span> <a href="index.html#type-decl">decl</a> <span>&#45;&gt;</span> <span class="type-var">'req</span> <span>&#45;&gt;</span> unit;</code></td></tr></table><code>}</code></dt><dd><p><code>'prop</code> represents the type of property values (<a href="../Types/Variance/index.html#type-t"><code>Types.Variance.t</code></a>, just 'bool' for immediacy, etc).</p><p><code>'req</code> represents the property value required by the author of the declaration, if they gave an expectation: <code>type +'a t = ...</code>.</p><p>Some properties have no natural notion of user requirement, or their requirement is global, or already stored in <code>type_declaration</code>; they can just use <code>unit</code> as <code>'req</code> parameter.</p></dd></dl><dl><dt class="spec value" id="val-compute_property"><a href="#val-compute_property" class="anchor"></a><code><span class="keyword">val</span> compute_property : <span><span>(<span class="type-var">'prop</span>, <span class="type-var">'req</span>)</span> <a href="index.html#type-property">property</a></span> <span>&#45;&gt;</span> <a href="../Env/index.html#type-t">Env.t</a> <span>&#45;&gt;</span> <span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="index.html#type-decl">decl</a>)</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'req</span> list</span> <span>&#45;&gt;</span> <span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="index.html#type-decl">decl</a>)</span> list</span></code></dt><dd><p><code>compute_property prop env decls req</code> performs a fixpoint computation to determine the final values of a property on a set of mutually-recursive type declarations. The <code>req</code> argument must be a list of the same size as <code>decls</code>, providing the user requirement for each declaration.</p></dd></dl><dl><dt class="spec value" id="val-compute_property_noreq"><a href="#val-compute_property_noreq" class="anchor"></a><code><span class="keyword">val</span> compute_property_noreq : <span><span>(<span class="type-var">'prop</span>, unit)</span> <a href="index.html#type-property">property</a></span> <span>&#45;&gt;</span> <a href="../Env/index.html#type-t">Env.t</a> <span>&#45;&gt;</span> <span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="index.html#type-decl">decl</a>)</span> list</span> <span>&#45;&gt;</span> <span><span>(<a href="../Ident/index.html#type-t">Ident.t</a> * <a href="index.html#type-decl">decl</a>)</span> list</span></code></dt></dl></div></body></html>